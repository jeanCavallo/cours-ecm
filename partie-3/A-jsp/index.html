<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<title>Annexe A : Les Java Server Pages (JSP)</title>
<link rel="stylesheet" href="./../../style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_annexe_a_les_java_server_pages_jsp">Annexe A : Les Java Server Pages (JSP)</a>
<ul class="sectlevel1">
<li><a href="#_les_directives_jsp">1. Les directives jsp</a></li>
<li><a href="#_les_actions_jsp">2. Les actions jsp</a></li>
<li><a href="#_variables_implicites">3. Variables implicites</a></li>
<li><a href="#_expression_language">4. Expression language</a>
<ul class="sectlevel2">
<li><a href="#_opérateurs">4.1. Opérateurs</a></li>
</ul>
</li>
<li><a href="#_custom_tags_et_fonctions">5. Custom tags et fonctions</a>
<ul class="sectlevel2">
<li><a href="#_functions">5.1. Functions</a></li>
<li><a href="#_custom_tag">5.2. Custom tag</a></li>
<li><a href="#_tag_files">5.3. Tag files</a></li>
</ul>
</li>
<li><a href="#_jstl">6. Jstl</a>
<ul class="sectlevel2">
<li><a href="#_core">6.1. Core</a></li>
<li><a href="#_format">6.2. Format</a></li>
<li><a href="#_fonctions">6.3. Fonctions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="paragraph">
<p><a href="../../index.html">&lt;&lt; Retour à l&#8217;index</a></p>
</div>
<h1 id="_annexe_a_les_java_server_pages_jsp" class="sect0">Annexe A : Les Java Server Pages (JSP)</h1>
<div class="sidebarblock">
<div class="content">
<div class="title">Les JSP en 3 phrases</div>
<div class="paragraph">
<p>C&#8217;est la technologie de création de rendu en JEE.</p>
</div>
<div class="paragraph">
<p>C&#8217;est du HTML avec un peu d&#8217;inserts qui pilotent la génération.</p>
</div>
<div class="paragraph">
<p>La synthaxe permet une factorisation simple et une bonne maintenabilité.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Voici un exemple de jsp</p>
</div>
<div class="listingblock">
<div class="title">hello.jsp</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="error">&lt;</span>%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%<span class="error">&gt;</span>

<span class="error">&lt;</span>%@ taglib uri=&quot;http://java.sun.com/jstl/core&quot; prefix=&quot;c&quot; %<span class="error">&gt;</span>

<span class="doctype">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</span>
<span class="tag">&lt;html&gt;</span>
   <span class="tag">&lt;head&gt;</span><span class="tag">&lt;/head&gt;</span>
   <span class="tag">&lt;body&gt;</span>
      Hello ${name1} <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;c:if</span> <span class="attribute-name">test</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${name2}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>and ${name2}<span class="tag">&lt;/c:if&gt;</span> ! <i class="conum" data-value="2"></i><b>(2)</b>
   <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Expression language (EL) afin d&#8217;écrire des valeurs dans la page</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Custom tag afin de controller le flot dans la page</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Les mécaniques de génération sont riches afin de créer le rendu html.</p>
</div>
<div class="paragraph">
<p>On peut aussi faire du XML ou du JSON mais ce n&#8217;est pas le plus adapté.</p>
</div>
<div class="paragraph">
<p>Les jsp sont compilées en code java au moment de leur interprétation, avant d&#8217;être exécutées.</p>
</div>
<div class="sect1">
<h2 id="_les_directives_jsp">1. Les directives jsp</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les directives sont des méta données.</p>
</div>
<div class="paragraph">
<p>Le format d&#8217;une directive est le suivant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="error">&lt;</span>%@ directive { attribut=&quot;valeur&quot; } %<span class="error">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Par exemple afin de contrôler le type mime et l&#8217;encoding de la page.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="error">&lt;</span>%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%<span class="error">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ou bien l&#8217;inclusion d&#8217;un autre fichier.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="error">&lt;</span>%@ include file=&quot;autre_fichier.jsp&quot; %<span class="error">&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_les_actions_jsp">2. Les actions jsp</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les actions JSP sont des balises qui appellent des fonctions sur serveur HTTP</p>
</div>
<div class="paragraph">
<p>Le format d&#8217;une action est le suivant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;jsp:action</span> <span class="error">{</span> <span class="attribute-name">attribut</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">valeur</span><span class="delimiter">&quot;</span></span> <span class="error">}</span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Par exemple, un include s&#8217;écrit comme suit.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;jsp:include</span> <span class="attribute-name">page</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">autre_fichier.jsp</span><span class="delimiter">&quot;</span></span> <span class="tag">&gt;</span>
   <span class="tag">&lt;jsp:param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">monParam</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">valeur</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/jsp:include&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
En pratique, les actions sont peu utilisées car il existe des mécanismes plus puissants.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_variables_implicites">3. Variables implicites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les variables implicites sont des variables qui sont présentes dans toutes les jsp.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Quelques variables implicites</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Nom</th>
<th class="tableblock halign-left valign-top">Signification</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">out</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">le JSPWriter utilisé pour envoyer la réponse HTTP au client</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">page</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">la page courante</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pageContext</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">les données associées à la page entière</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">la requête <code>HttpServletRequest</code> courante</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">la réponse <code>HttpServletResponse</code> courante</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">session</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">la session <code>HttpSession</code> associée à la requête</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cookie</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">les cookies</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">header</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tous les headers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">param</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tous paramètres</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Il est rare d&#8217;avoir besoin de ces variables implicites dans les jsp.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">exemple: afficher tous les cookies</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="error">&lt;</span>%@ taglib uri=&quot;http://java.sun.com/jstl/core&quot; prefix=&quot;c&quot; %<span class="error">&gt;</span>

<span class="tag">&lt;html&gt;</span>
<span class="tag">&lt;head&gt;</span><span class="tag">&lt;title&gt;</span>Cookie display<span class="tag">&lt;/title&gt;</span><span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
  <span class="tag">&lt;h2&gt;</span>Here are all the Available Cookies<span class="tag">&lt;/h2&gt;</span>
    <span class="tag">&lt;ul&gt;</span>
      <span class="tag">&lt;c:forEach</span> <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cookies</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">items</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${cookie}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;li&gt;</span>
            <span class="tag">&lt;c:out</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${cookies.key}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>: <span class="tag">&lt;c:out</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${cookies.value.value}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/li&gt;</span>
      <span class="tag">&lt;/c:forEach&gt;</span>
    <span class="tag">&lt;/ul&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_expression_language">4. Expression language</h2>
<div class="sectionbody">
<div class="paragraph">
<p>C&#8217;est une notation simple et puissante utilisable partout dans les jsp.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">${expression}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Elle permet de récupérer une valeur en parcourant tous les <strong>scopes</strong> (page, request, session et application).</p>
</div>
<div class="paragraph">
<p>L&#8217;expression suivante</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="error">$</span>{cart.items[<span class="integer">2</span>].name}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Correspond en java à</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Cart cart = (Cart) request.getSession().getAttribute(<span class="string"><span class="delimiter">&quot;</span><span class="content">cart</span><span class="delimiter">&quot;</span></span>);

<span class="predefined-type">String</span> name = cart.getItems().get(<span class="integer">2</span>).getName();

response.getWriter().write(name);</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
La notation ${&#8230;&#8203;} n&#8217;escape pas les caratères &amp;, &lt; et &gt; qui posent problème en HTML
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_opérateurs">4.1. Opérateurs</h3>
<div class="paragraph">
<p>L&#8217;expession language propose des opérateurs bien pratiques.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Opérateurs EL</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Opérateur</th>
<th class="tableblock halign-left valign-top">Signification</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Naviguer vers une propriété</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Opérateur tableau ( <code>${person["name"]}</code> ou <code>${rows[2]}</code> )</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">empty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teste si un objet est null ou vide</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">+</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Addition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Soustraction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiplication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Division</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">== / eq</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Égalité</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!= / neq</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inégalité</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt; / lt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inférieur</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8656; / e</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inférieur ou égal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt; / gt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supérieur</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt;= / ge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supérieur ou égal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">% / mod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modulo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&amp;&amp; / and</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Et</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">/ or</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ou</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">!</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Négation</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_tags_et_fonctions">5. Custom tags et fonctions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Les taglib (librairies de tags) sont chargées comme suit</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="error">&lt;</span>%@ taglib prefix=&quot;mataglib&quot; uri=&quot;/WEB-INF/tld/util.tld&quot; %<span class="error">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Une taglib peut contenir des tags et des fonctions.</p>
</div>
<div class="listingblock">
<div class="title">exemple : /WEB-INF/tld/util.tld</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="tag">&lt;taglib</span>
  <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/xml/ns/j2ee</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://java.sun.com/xml/ns/j2ee web-jsptaglibrary_2_0.xsd</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    <span class="comment">&lt;!-- propriétés de la taglib --&gt;</span>
    <span class="tag">&lt;tlib-version&gt;</span>1.0<span class="tag">&lt;/tlib-version&gt;</span>
    <span class="tag">&lt;short-name&gt;</span>util<span class="tag">&lt;/short-name&gt;</span>
    <span class="tag">&lt;uri&gt;</span>http://com.acme.tags/util<span class="tag">&lt;/uri&gt;</span>

    <span class="tag">&lt;tag&gt;</span>
        <span class="comment">&lt;!-- nom du tag --&gt;</span>
        <span class="tag">&lt;name&gt;</span>pagination<span class="tag">&lt;/name&gt;</span>
        <span class="comment">&lt;!-- classe java contenant le code du tag --&gt;</span>
        <span class="tag">&lt;tagclass&gt;</span>com.acme.tag.PaginationTag<span class="tag">&lt;/tagclass&gt;</span>
        <span class="tag">&lt;body-content&gt;</span>empty<span class="tag">&lt;/body-content&gt;</span>
        <span class="tag">&lt;info&gt;</span>Helper tag that builds a Pagination object used to build paginations menus.<span class="tag">&lt;/info&gt;</span>
        <span class="comment">&lt;!-- liste des attributs supportés --&gt;</span>
        <span class="tag">&lt;attribute&gt;</span>
            <span class="tag">&lt;name&gt;</span>items<span class="tag">&lt;/name&gt;</span>
            <span class="tag">&lt;required&gt;</span>true<span class="tag">&lt;/required&gt;</span>
            <span class="tag">&lt;rtexprvalue&gt;</span>true<span class="tag">&lt;/rtexprvalue&gt;</span>
        <span class="tag">&lt;/attribute&gt;</span>
    <span class="tag">&lt;/tag&gt;</span>

    <span class="tag">&lt;function&gt;</span>
        <span class="comment">&lt;!-- nom de la fonction --&gt;</span>
        <span class="tag">&lt;name&gt;</span>slug<span class="tag">&lt;/name&gt;</span>
        <span class="comment">&lt;!-- classe java contenant le code de la fonction --&gt;</span>
        <span class="tag">&lt;function-class&gt;</span>com.acme.FormatUtils<span class="tag">&lt;/function-class&gt;</span>
        <span class="comment">&lt;!-- signature de la méthode *statique* dans la classe java --&gt;</span>
        <span class="tag">&lt;function-signature&gt;</span>java.lang.String slug(java.lang.String)<span class="tag">&lt;/function-signature&gt;</span>
    <span class="tag">&lt;/function&gt;</span>
<span class="tag">&lt;/taglib&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Par convention, les fichier tld vont dans <code>WEB-INF/tld</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Il est possible de packager ces éléments dans une librairie .jar afin de les réutiliser dans différents projets.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_functions">5.1. Functions</h3>
<div class="paragraph">
<p>Une fonction permet d&#8217;appeler du code java plus adapté à un traitement complexe.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="error">$</span>{mataglib:faitca(<span class="string"><span class="delimiter">&quot;</span><span class="content">valeur1</span><span class="delimiter">&quot;</span></span>)}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_tag">5.2. Custom tag</h3>
<div class="paragraph">
<p>Un custom tag ressemble à un tag HTML classique.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div&gt;</span>
    <span class="tag">&lt;h2&gt;</span>title<span class="tag">&lt;/h2&gt;</span>
    <span class="tag">&lt;mataglib:faituntruc</span> <span class="attribute-name">att1</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">valeur1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">att2</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">valeur2</span><span class="delimiter">&quot;</span></span> <span class="tag">&gt;</span>
<span class="tag">&lt;div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A la lecture, ils semblent faire partie de l&#8217;arbre DOM HTML.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tag_files">5.3. Tag files</h3>
<div class="paragraph">
<p>Un tag file (.tag) est une manière simplifiée de définir un custom tag : la tld devient optionnelle.</p>
</div>
<div class="listingblock">
<div class="title">exemple : /WEB-INF/tags/fragments/hello.tag</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="error">&lt;</span>%@ tag body-content=&quot;empty&quot; pageEncoding=&quot;UTF-8&quot; %<span class="error">&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="error">&lt;</span>%@ attribute name=&quot;name&quot; required=&quot;true&quot; %<span class="error">&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>

<span class="tag">&lt;h2&gt;</span><span class="tag">&lt;font</span> <span class="attribute-name">color</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">black</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>hello ${name}!<span class="tag">&lt;/font&gt;</span><span class="tag">&lt;/h2&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>paramétrage de la taglib</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>définition du paramètre name obligatoire</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>synthaxe jsp classique</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Par convention, les fichiers tag sont placé dans /WEB-INF/tags/.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A l&#8217;usage, dans un autre fichier :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="error">&lt;</span>%@ taglib prefix=&quot;fragments&quot; tagdir=&quot;/WEB-INF/tags/fragments&quot; %<span class="error">&gt;</span>

<span class="tag">&lt;fragments:hello</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">John</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Cela remplace très agréablement la directive include ou l&#8217;action jsp:include.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jstl">6. Jstl</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La Java server pages Standard Tag Library est la librairie de tag la plus utilisée.</p>
</div>
<div class="paragraph">
<p>Elle contient 5 taglibs.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. JSTL</caption>
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Librairie</th>
<th class="tableblock halign-left valign-top">Préfixe</th>
<th class="tableblock halign-left valign-top">Uri</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Core</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">c</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://java.sun.com/jsp/jstl/core" class="bare">http://java.sun.com/jsp/jstl/core</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Format</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fmt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://java.sun.com/jsp/jstl/fmt" class="bare">http://java.sun.com/jsp/jstl/fmt</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Functions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://java.sun.com/jsp/jstl/functions" class="bare">http://java.sun.com/jsp/jstl/functions</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XML</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://java.sun.com/jsp/jstl/xml" class="bare">http://java.sun.com/jsp/jstl/xml</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://java.sun.com/jsp/jstl/sql" class="bare">http://java.sun.com/jsp/jstl/sql</a></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Il est peu conseillé d&#8217;utilisé les librairies XML et SQL
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_core">6.1. Core</h3>
<div class="paragraph">
<p>Ce sont les actions de base.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="error">&lt;</span>%@ taglib uri=&quot;http://java.sun.com/jstl/core&quot; prefix=&quot;c&quot; %<span class="error">&gt;</span></code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. Tags les plus importants</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tag</th>
<th class="tableblock halign-left valign-top">Utilité</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">if</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">branchement conditionnel</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">choose / when / otherwise</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">branchement conditionnel de type switch / case</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">forEach</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boucle for</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">affecte une valeur dans un scope</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">out</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">affiche une valeur en escapant les &amp;, &lt; et &gt;</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">exemple</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;c:if</span> <span class="attribute-name">test</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${empty name}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Nom inconnu<span class="tag">&lt;/c:if&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_format">6.2. Format</h3>
<div class="paragraph">
<p>La librairie pour le formattage.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="error">&lt;</span>%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; prefix=&quot;fmt&quot; %<span class="error">&gt;</span></code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. Tags les plus importants</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tag</th>
<th class="tableblock halign-left valign-top">Utilité</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">formatDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formattage d&#8217;une date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parseDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parsing d&#8217;une date</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">formatNumber</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Formattage d&#8217;un nombre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">parseNumber</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parsing d&#8217;un nombre</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">message / setBundle / bundle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affichage de messages</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">exemple</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;fmt:formatDate</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${date}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dd/MM/yyyy</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_fonctions">6.3. Fonctions</h3>
<div class="paragraph">
<p>Des fonctions à utiliser avec l&#8217;EL</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="error">&lt;</span>%@ taglib uri=&quot;http://java.sun.com/jstl/functions&quot; prefix=&quot;fn&quot; %<span class="error">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Les fonctions sont :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>contains( java.lang.String, java.lang.String)</p>
</li>
<li>
<p>containsIgnoreCase( java.lang.String, java.lang.String)</p>
</li>
<li>
<p>endsWith( java.lang.String, java.lang.String)</p>
</li>
<li>
<p>escapeXml( java.lang.String)</p>
</li>
<li>
<p>indexOf( java.lang.String, java.lang.String)</p>
</li>
<li>
<p>join( java.lang.String[], java.lang.String)</p>
</li>
<li>
<p>length( java.lang.Object)</p>
</li>
<li>
<p>replace( java.lang.String, java.lang.String, java.lang.String)</p>
</li>
<li>
<p>split( java.lang.String, java.lang.String)</p>
</li>
<li>
<p>startsWith( java.lang.String, java.lang.String)</p>
</li>
<li>
<p>substring( java.lang.String, int, int)</p>
</li>
<li>
<p>substringAfter( java.lang.String, java.lang.String)</p>
</li>
<li>
<p>substringBefore( java.lang.String, java.lang.String)</p>
</li>
<li>
<p>toLowerCase( java.lang.String)</p>
</li>
<li>
<p>toUpperCase( java.lang.String)</p>
</li>
<li>
<p>trim( java.lang.String)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">exemple</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="error">$</span>{fn:escapeXml(<span class="string"><span class="delimiter">&quot;</span><span class="content">les &lt;balises&gt; xml &amp; html</span><span class="delimiter">&quot;</span></span>)} <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>produit <code>"les &amp;lt;balises&amp;gt; xml &amp;amp; html"</code> qui respecte le HTML</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</body>
</html>